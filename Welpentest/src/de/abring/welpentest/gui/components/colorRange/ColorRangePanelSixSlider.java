/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package de.abring.welpentest.gui.components.colorRange;

import java.awt.Color;
import java.util.ArrayList;
import java.util.List;

/**
 *
 * @author Andreas
 */
public class ColorRangePanelSixSlider extends javax.swing.JPanel {

    private boolean execute = true;
    private final List<ColorChangeListener> listeners = new ArrayList<>();
    /**
     * Creates new form FarbbegrenzerPanel
     */
    public ColorRangePanelSixSlider() {
        initComponents();
    }
    
    public ColorRange getColorRange() {
        Color color1 = new Color(this.jSldRedMin.getValue(), this.jSldGreenMin.getValue(), this.jSldBlueMin.getValue());
        Color color2 = new Color(this.jSldRedMax.getValue(), this.jSldGreenMax.getValue(), this.jSldBlueMax.getValue());
        return new ColorRange(color1, color2);
    }
    
    public void setColorRange(ColorRange colorRange) {
        boolean tempExecute = execute;
        execute = false;
        this.jSldRedMin.setValue(colorRange.getColor1().getRed());
        this.jSldGreenMin.setValue(colorRange.getColor1().getGreen());
        this.jSldBlueMin.setValue(colorRange.getColor1().getBlue());
        this.jSldRedMax.setValue(colorRange.getColor2().getRed());
        this.jSldGreenMax.setValue(colorRange.getColor2().getGreen());
        this.jSldBlueMax.setValue(colorRange.getColor2().getBlue());
        execute = tempExecute;
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {
        java.awt.GridBagConstraints gridBagConstraints;

        jSldRedMin = new javax.swing.JSlider();
        jSldGreenMin = new javax.swing.JSlider();
        jSldBlueMin = new javax.swing.JSlider();
        jSldRedMax = new javax.swing.JSlider();
        jSldGreenMax = new javax.swing.JSlider();
        jSldBlueMax = new javax.swing.JSlider();
        jLblRedMin = new javax.swing.JLabel();
        jLblGreenMin = new javax.swing.JLabel();
        jLblBlueMin = new javax.swing.JLabel();
        jLblRedMax = new javax.swing.JLabel();
        jLblGreenMax = new javax.swing.JLabel();
        jLblBlueMax = new javax.swing.JLabel();

        setBorder(javax.swing.BorderFactory.createEtchedBorder());
        setLayout(new java.awt.GridBagLayout());

        jSldRedMin.setMaximum(255);
        jSldRedMin.setOrientation(javax.swing.JSlider.VERTICAL);
        jSldRedMin.setValue(128);
        jSldRedMin.setPreferredSize(new java.awt.Dimension(20, 200));
        jSldRedMin.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSldRedMinStateChanged(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 71;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.3;
        add(jSldRedMin, gridBagConstraints);

        jSldGreenMin.setMaximum(63);
        jSldGreenMin.setOrientation(javax.swing.JSlider.VERTICAL);
        jSldGreenMin.setValue(0);
        jSldGreenMin.setPreferredSize(new java.awt.Dimension(20, 200));
        jSldGreenMin.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSldGreenMinStateChanged(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 71;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.3;
        add(jSldGreenMin, gridBagConstraints);

        jSldBlueMin.setMaximum(63);
        jSldBlueMin.setOrientation(javax.swing.JSlider.VERTICAL);
        jSldBlueMin.setValue(0);
        jSldBlueMin.setPreferredSize(new java.awt.Dimension(20, 200));
        jSldBlueMin.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSldBlueMinStateChanged(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 3;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 71;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.3;
        add(jSldBlueMin, gridBagConstraints);

        jSldRedMax.setMaximum(255);
        jSldRedMax.setMinimum(127);
        jSldRedMax.setOrientation(javax.swing.JSlider.VERTICAL);
        jSldRedMax.setValue(255);
        jSldRedMax.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSldRedMaxStateChanged(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 71;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.3;
        add(jSldRedMax, gridBagConstraints);

        jSldGreenMax.setMaximum(255);
        jSldGreenMax.setOrientation(javax.swing.JSlider.VERTICAL);
        jSldGreenMax.setValue(63);
        jSldGreenMax.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSldGreenMaxStateChanged(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 71;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.3;
        add(jSldGreenMax, gridBagConstraints);

        jSldBlueMax.setMaximum(255);
        jSldBlueMax.setOrientation(javax.swing.JSlider.VERTICAL);
        jSldBlueMax.setValue(63);
        jSldBlueMax.addChangeListener(new javax.swing.event.ChangeListener() {
            public void stateChanged(javax.swing.event.ChangeEvent evt) {
                jSldBlueMaxStateChanged(evt);
            }
        });
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 0;
        gridBagConstraints.fill = java.awt.GridBagConstraints.BOTH;
        gridBagConstraints.ipady = 71;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        gridBagConstraints.weighty = 0.3;
        add(jSldBlueMax, gridBagConstraints);

        jLblRedMin.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblRedMin.setText("128");
        jLblRedMin.setPreferredSize(new java.awt.Dimension(20, 16));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jLblRedMin, gridBagConstraints);

        jLblGreenMin.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblGreenMin.setText("0");
        jLblGreenMin.setMaximumSize(new java.awt.Dimension(20, 16));
        jLblGreenMin.setMinimumSize(new java.awt.Dimension(20, 16));
        jLblGreenMin.setPreferredSize(new java.awt.Dimension(20, 16));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jLblGreenMin, gridBagConstraints);

        jLblBlueMin.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblBlueMin.setText("0");
        jLblBlueMin.setMaximumSize(new java.awt.Dimension(20, 16));
        jLblBlueMin.setMinimumSize(new java.awt.Dimension(20, 16));
        jLblBlueMin.setPreferredSize(new java.awt.Dimension(20, 16));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 2;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jLblBlueMin, gridBagConstraints);

        jLblRedMax.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblRedMax.setText("255");
        jLblRedMax.setMaximumSize(new java.awt.Dimension(20, 16));
        jLblRedMax.setMinimumSize(new java.awt.Dimension(20, 16));
        jLblRedMax.setPreferredSize(new java.awt.Dimension(20, 16));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 0;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jLblRedMax, gridBagConstraints);

        jLblGreenMax.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblGreenMax.setText("63");
        jLblGreenMax.setMaximumSize(new java.awt.Dimension(20, 16));
        jLblGreenMax.setMinimumSize(new java.awt.Dimension(20, 16));
        jLblGreenMax.setPreferredSize(new java.awt.Dimension(20, 16));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 1;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jLblGreenMax, gridBagConstraints);

        jLblBlueMax.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLblBlueMax.setText("63");
        jLblBlueMax.setMaximumSize(new java.awt.Dimension(20, 16));
        jLblBlueMax.setMinimumSize(new java.awt.Dimension(20, 16));
        jLblBlueMax.setPreferredSize(new java.awt.Dimension(20, 16));
        gridBagConstraints = new java.awt.GridBagConstraints();
        gridBagConstraints.gridx = 3;
        gridBagConstraints.gridy = 1;
        gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
        gridBagConstraints.anchor = java.awt.GridBagConstraints.NORTHWEST;
        add(jLblBlueMax, gridBagConstraints);
    }// </editor-fold>//GEN-END:initComponents

    private void jSldRedMinStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSldRedMinStateChanged
        this.jLblRedMin.setText(String.valueOf(this.jSldRedMin.getValue()));
        if (this.jSldRedMax.getValue() < this.jSldRedMin.getValue())
            this.jSldRedMax.setValue(this.jSldRedMin.getValue());
        this.jSldRedMax.setMinimum(this.jSldRedMin.getValue());
        executeColorChange();
    }//GEN-LAST:event_jSldRedMinStateChanged

    private void jSldGreenMinStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSldGreenMinStateChanged
        this.jLblGreenMin.setText(String.valueOf(this.jSldGreenMin.getValue()));
        if (this.jSldGreenMax.getValue() < this.jSldGreenMin.getValue())
            this.jSldGreenMax.setValue(this.jSldGreenMin.getValue());
        this.jSldGreenMax.setMinimum(this.jSldGreenMin.getValue());
        executeColorChange();
    }//GEN-LAST:event_jSldGreenMinStateChanged

    private void jSldBlueMinStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSldBlueMinStateChanged
        this.jLblBlueMin.setText(String.valueOf(this.jSldBlueMin.getValue()));
        if (this.jSldBlueMax.getValue() < this.jSldBlueMin.getValue())
            this.jSldBlueMax.setValue(this.jSldBlueMin.getValue());
        this.jSldBlueMax.setMinimum(this.jSldBlueMin.getValue());
        executeColorChange();
    }//GEN-LAST:event_jSldBlueMinStateChanged

    private void jSldRedMaxStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSldRedMaxStateChanged
        this.jLblRedMax.setText(String.valueOf(this.jSldRedMax.getValue()));
        if (this.jSldRedMin.getValue() > this.jSldRedMax.getValue())
            this.jSldRedMin.setValue(this.jSldRedMax.getValue());
        this.jSldRedMin.setMaximum(this.jSldRedMax.getValue());
        executeColorChange();
    }//GEN-LAST:event_jSldRedMaxStateChanged

    private void jSldGreenMaxStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSldGreenMaxStateChanged
        this.jLblGreenMax.setText(String.valueOf(this.jSldGreenMax.getValue()));
        if (this.jSldGreenMin.getValue() > this.jSldGreenMax.getValue())
            this.jSldGreenMin.setValue(this.jSldGreenMax.getValue());
        this.jSldGreenMin.setMaximum(this.jSldGreenMax.getValue());
        executeColorChange();
    }//GEN-LAST:event_jSldGreenMaxStateChanged

    private void jSldBlueMaxStateChanged(javax.swing.event.ChangeEvent evt) {//GEN-FIRST:event_jSldBlueMaxStateChanged
        this.jLblBlueMax.setText(String.valueOf(this.jSldBlueMax.getValue()));
        if (this.jSldBlueMin.getValue() > this.jSldBlueMax.getValue())
            this.jSldBlueMin.setValue(this.jSldBlueMax.getValue());
        this.jSldBlueMin.setMaximum(this.jSldBlueMax.getValue());
        executeColorChange();
    }//GEN-LAST:event_jSldBlueMaxStateChanged

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JLabel jLblBlueMax;
    private javax.swing.JLabel jLblBlueMin;
    private javax.swing.JLabel jLblGreenMax;
    private javax.swing.JLabel jLblGreenMin;
    private javax.swing.JLabel jLblRedMax;
    private javax.swing.JLabel jLblRedMin;
    private javax.swing.JSlider jSldBlueMax;
    private javax.swing.JSlider jSldBlueMin;
    private javax.swing.JSlider jSldGreenMax;
    private javax.swing.JSlider jSldGreenMin;
    private javax.swing.JSlider jSldRedMax;
    private javax.swing.JSlider jSldRedMin;
    // End of variables declaration//GEN-END:variables

    /**
     * @return the execute
     */
    public boolean isExecute() {
        return execute;
    }

    /**
     * @param execute the execute to set
     */
    public void setExecute(boolean execute) {
        this.execute = execute;
    }
    
    /**
     * All the MovementListeners
     * @param toAdd 
     */
    public void addListener(ColorChangeListener toAdd) {
        listeners.add(toAdd);
    }
    
    public void removeListener(ColorChangeListener toRemove) {
        listeners.remove(toRemove);
    }

    public void executeColorChange() {
        if (!execute)
            return;
        boolean tempExecute = execute;
        execute = false;
        ColorChangeEvent evt = new ColorChangeEvent(getColorRange(), ColorChangeEvent.COLOR_CHANGED);
        listeners.forEach((hl) -> {
            hl.colorChanged(evt);
        });
        execute = tempExecute;
    }
}

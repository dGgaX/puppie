/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package de.abring.welpentest.CodingTrain;

import java.awt.BasicStroke;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Point;
import java.awt.Stroke;
import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import javax.swing.JPanel;

/**
 *
 * @author Karima
 */
public class GraphPanel extends JPanel{
    
    private int maxX = 0;
    private int maxY = 0;
    
    private Stroke stroke = new BasicStroke(2);
    
    private Color backGroundColor = Color.BLACK;
    private Color color = Color.YELLOW;
    
    private final List<Point> ticks = new ArrayList<>();
    
    public GraphPanel() {
        this.setSize(100, 200);
        this.setPreferredSize(new Dimension(100, 200));
        this.setMinimumSize(new Dimension(50, 50));
        this.setMaximumSize(new Dimension(4000, 2000));
    }
    
    /**
     *
     * @param p
     */
    public void addPoint(Point p) {
        if (p == null || p.x < 0 || p.y < 0) 
            return;
        
        maxX = Math.max(maxX, p.x);
        maxY = Math.max(maxY, p.y);
        ticks.add(p);
        
        Collections.sort(ticks, (Point lhs, Point rhs) -> lhs.x < rhs.x ? -1 : (lhs.x > rhs.x) ? 1 : 0);
        this.updateUI();
    }
    
    public void clear() {
        maxX = 0;
        maxY = 0;
        ticks.clear();
    }
    
    /**
     *
     * @param g
     */
    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        Graphics2D g2 = (Graphics2D) g;
	if (stroke != null)
            g2.setStroke(stroke);
        g2.setBackground(backGroundColor);
        g2.setColor(color);
        g2.clearRect(0, 0, this.getWidth(), this.getHeight());
        Point l = new Point(0, 0);
        for (Point p : ticks) {
            g2.drawLine(Math.round(l.x * this.getWidth() / (float) maxX), Math.round(this.getHeight() - l.y * this.getHeight() / (float) maxY), Math.round(p.x * this.getWidth() / (float) maxX), Math.round(this.getHeight() - p.y * this.getHeight() / (float) maxY));
            l = p;
        }
    }

    /**
     * @return the stroke
     */
    public Stroke getStroke() {
        return stroke;
    }

    /**
     * @param stroke the stroke to set
     */
    public void setStroke(Stroke stroke) {
        this.stroke = stroke;
    }

    /**
     * @return the backGroundColor
     */
    public Color getBackGroundColor() {
        return backGroundColor;
    }

    /**
     * @param backGroundColor the backGroundColor to set
     */
    public void setBackGroundColor(Color backGroundColor) {
        this.backGroundColor = backGroundColor;
    }

    /**
     * @return the color
     */
    public Color getColor() {
        return color;
    }

    /**
     * @param color the color to set
     */
    public void setColor(Color color) {
        this.color = color;
    }
}
